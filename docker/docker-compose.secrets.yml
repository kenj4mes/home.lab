# ==============================================================================
# üîê HomeLab Docker Secrets Configuration
# ==============================================================================
# This file defines how secrets are handled in Docker Compose.
# Secrets should be created manually via 'docker secret create' 
# or point to files in /run/secrets/
#
# USAGE: This overlay file must be combined with service definition files:
#   docker compose -f docker-compose.yml -f docker-compose.base.yml -f docker-compose.secrets.yml config
#
# For bookstack only:
#   docker compose -f docker-compose.yml -f docker-compose.secrets.yml up -d bookstack bookstack-db
#
# For Base blockchain only:
#   docker compose -f docker-compose.base.yml -f docker-compose.secrets.yml up -d base-db base-explorer
# ==============================================================================

services:
  bookstack-db:
    secrets:
      - db_root_password
      - db_password

  bookstack:
    secrets:
      - db_password

  base-db:
    secrets:
      - base_db_password

  base-explorer:
    secrets:
      - base_db_password
      - base_explorer_secret

  base-wallet-cli:
    secrets:
      - base_wallet_private_key

secrets:
  db_root_password:
    file: ${CONFIG_PATH:-/srv/homelab}/secrets/db_root_password.txt
  db_password:
    file: ${CONFIG_PATH:-/srv/homelab}/secrets/db_password.txt
  base_db_password:
    file: ${CONFIG_PATH:-/srv/homelab}/secrets/base_db_password.txt
  base_explorer_secret:
    file: ${CONFIG_PATH:-/srv/homelab}/secrets/base_explorer_secret.txt
  base_wallet_private_key:
    file: ${CONFIG_PATH:-/srv/homelab}/secrets/base_wallet_private_key.txt
